/* Designbase Card – 단순/일관/읽기성(typographic rhythm) 중심
   - 테마 변수 ONLY 사용 (요청사항)
   - 사이즈에 따른 로컬 CSS 변수로 리듬 통일
*/

.designbase-card {
    /* ===== Base / Local tokens ===== */
    --card-padding: var(--db-padding-m);
    --card-gap: var(--db-gap-m);
    --card-title-size: var(--db-text-l);
    --card-subtitle-size: var(--db-text-base);
    --card-desc-size: var(--db-text-base);
    --card-radius: var(--db-radius-l);
    --card-image-height: 160px;
    --card-title-weight: var(--db-weight-semibold);

    position: relative;
    display: flex;
    flex-direction: column;
    background: var(--db-surface-base);
    border: 1px solid var(--db-border-base);
    border-radius: var(--card-radius);
    box-shadow: var(--db-shadow-card);
    transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease;
    overflow: hidden;

    /* ===== Variants ===== */
    &.designbase-card--default {
        border: 1px solid var(--db-border-base);
        box-shadow: var(--db-shadow-card);
        background: var(--db-surface-base);
    }

    &.designbase-card--elevated {
        border: 1px solid var(--db-border-layer-1);
        box-shadow: var(--db-shadow-card-hover);
        background: var(--db-surface-base);
    }

    &.designbase-card--outlined {
        border: 2px solid var(--db-border-layer-1);
        box-shadow: none;
        background: var(--db-surface-base);
    }

    &.designbase-card--filled {
        border: 1px solid var(--db-border-layer-2);
        box-shadow: none;
        background: var(--db-surface-layer-1);
    }

    &.designbase-card--flat {
        border: 1px solid transparent;
        box-shadow: none;
        background: transparent;
    }

    /* ===== Sizes – 로컬 변수로 일괄 제어 ===== */
    &.designbase-card--s {
        --card-padding: var(--db-padding-s);
        --card-gap: var(--db-gap-s);
        --card-title-size: var(--db-text-base);
        --card-subtitle-size: var(--db-text-s);
        --card-desc-size: var(--db-text-s);
        --card-radius: var(--db-radius-m);
        --card-image-height: 120px;
        --card-title-weight: var(--db-weight-semibold);
    }

    &.designbase-card--m {
        --card-padding: var(--db-padding-m);
        --card-gap: var(--db-gap-m);
        --card-title-size: var(--db-text-l);
        --card-subtitle-size: var(--db-text-base);
        --card-desc-size: var(--db-text-base);
        --card-radius: var(--db-radius-l);
        --card-image-height: 160px;
        --card-title-weight: var(--db-weight-semibold);
    }

    &.designbase-card--l {
        --card-padding: var(--db-padding-l);
        --card-gap: var(--db-gap-m);
        --card-title-size: var(--db-text-xl);
        --card-subtitle-size: var(--db-text-l);
        --card-desc-size: var(--db-text-l);
        --card-radius: var(--db-radius-xl);
        --card-image-height: 200px;
        --card-title-weight: var(--db-weight-bold);
    }

    &.designbase-card--xl {
        --card-padding: var(--db-padding-xl);
        --card-gap: var(--db-gap-l);
        --card-title-size: var(--db-text-2xl);
        --card-subtitle-size: var(--db-text-xl);
        --card-desc-size: var(--db-text-xl);
        --card-radius: var(--db-radius-2xl);
        --card-image-height: 240px;
        --card-title-weight: var(--db-weight-bold);
    }

    /* ===== Layouts ===== */
    &.designbase-card--horizontal {
        flex-direction: row;

        .designbase-card__image--left,
        .designbase-card__image--right {
            flex: 0 0 auto;
            width: 180px;
            height: auto;
        }

        .designbase-card__image--right {
            order: 2;
        }

        .designbase-card__content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
    }

    &.designbase-card--compact {
        --card-padding: var(--db-padding-s);
        --card-gap: var(--db-gap-s);
    }

    /* ===== Interactions ===== */
    &.designbase-card--clickable {
        cursor: pointer;
        user-select: none;

        &:hover {
            transform: translateY(-2px);
            box-shadow: var(--db-shadow-card-hover);
        }

        &:active {
            transform: translateY(0);
        }

        &:focus-visible {
            outline: 2px solid var(--db-border-focus);
            outline-offset: 2px;
        }
    }

    &.designbase-card--hoverable:hover {
        border-color: var(--db-border-layer-1);
        box-shadow: var(--db-shadow-card-hover);
    }

    &.designbase-card--selectable {
        cursor: pointer;

        &:hover {
            border-color: var(--db-border-layer-1);
        }
    }

    &.designbase-card--selected {
        border-color: var(--db-brand-primary);
        background: var(--db-surface-layer-1);
    }

    &.designbase-card--disabled {
        opacity: var(--db-opacity-disabled);
        pointer-events: none;
        cursor: not-allowed;
    }

    &.designbase-card--loading {
        pointer-events: none;
    }

    &.designbase-card--full-width {
        width: 100%;
    }

    /* ===== Image ===== */
    &__image {
        position: relative;
        overflow: hidden;
        background: var(--db-surface-layer-1);

        &--top,
        &--bottom {
            height: var(--card-image-height);
        }

        &--left,
        &--right {
            height: 100%;
        }

        &--background {
            position: absolute;
            inset: 0;
            z-index: 1;
        }
    }

    &__image-element {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;

        &:focus-visible {
            outline: 2px solid var(--db-border-focus);
            outline-offset: 2px;
        }
    }

    /* ===== Content ===== */
    &__content {
        display: flex;
        flex-direction: column;
        gap: var(--card-gap);
        padding: var(--card-padding);
        flex: 1;
    }

    &__icon {
        display: flex;
        align-items: center;
        color: var(--db-icon-primary);
    }

    &__header {
        display: flex;
        flex-direction: column;
        gap: var(--db-gap-xs);
        margin: 0;
    }

    &__title {
        margin: 0;
        color: var(--db-text-primary);
        font-size: var(--card-title-size);
        font-weight: var(--card-title-weight);
        line-height: var(--db-leading-snug);
    }

    &__subtitle {
        margin: 0;
        color: var(--db-text-secondary);
        font-size: var(--card-subtitle-size);
        font-weight: var(--db-weight-normal);
        line-height: var(--db-leading-normal);
    }

    &__description {
        margin: 0;
        color: var(--db-text-secondary);
        font-size: var(--card-desc-size);
        line-height: var(--db-leading-relaxed);
    }

    &__body {
        margin: 0;
        color: var(--db-text-primary);
        line-height: var(--db-leading-relaxed);
    }

    /* ===== Tags ===== */
    &__tags {
        display: flex;
        flex-wrap: wrap;
        gap: var(--db-gap-xs);
    }

    &__tag {
        padding: var(--db-padding-xs) var(--db-padding-s);
        background: var(--db-surface-layer-2);
        color: var(--db-text-primary);
        border: 1px solid var(--db-border-muted);
        border-radius: var(--db-radius-m);
        font-size: var(--db-text-xs);
        font-weight: var(--db-weight-medium);
    }

    /* ===== Meta ===== */
    &__meta {
        display: flex;
        flex-wrap: wrap;
        gap: var(--db-gap-s);
        font-size: var(--db-text-s);
        color: var(--db-text-secondary);
    }

    &__meta-item {
        display: inline-flex;
        align-items: center;
        gap: var(--db-gap-xs);
        white-space: nowrap;
    }

    &__meta-label {
        font-weight: var(--db-weight-medium);
        color: var(--db-text-secondary);
    }

    &__meta-sep {
        color: var(--db-text-tertiary);
    }

    &__meta-value {
        color: var(--db-text-primary);
    }

    /* ===== Actions ===== */
    &__actions {
        display: flex;
        gap: var(--db-gap-s);
        margin-top: auto;
        padding-top: var(--db-padding-s);
        border-top: 1px solid var(--db-border-muted);
        flex-wrap: wrap;
    }

    /* ===== Select / Loading ===== */
    &__select-overlay {
        position: absolute;
        top: var(--db-padding-s);
        left: var(--db-padding-s);
        z-index: 5;
        background: var(--db-surface-alpha);
        border-radius: var(--db-radius-s);
        padding: var(--db-padding-xs);
        backdrop-filter: blur(2px);
    }

    &__select-input {
        width: 16px;
        height: 16px;
        cursor: pointer;
    }

    &__loading-overlay {
        position: absolute;
        inset: 0;
        background: var(--db-surface-transparent);
        display: grid;
        place-items: center;
        z-index: 10;
    }

    &__loading-spinner {
        width: 32px;
        height: 32px;
        border: 3px solid var(--db-border-muted);
        border-top: 3px solid var(--db-brand-primary);
        border-radius: 50%;
        animation: cardLoadingSpin 1s linear infinite;
    }
}

/* ===== Animations ===== */
@keyframes cardLoadingSpin {
    to {
        transform: rotate(360deg);
    }
}

/* ===== Responsive ===== */
@media (max-width: 768px) {
    .designbase-card.designbase-card--horizontal {
        flex-direction: column;

        .designbase-card__image--left,
        .designbase-card__image--right {
            width: 100%;
            height: var(--card-image-height);
            order: -1;
        }
    }

    .designbase-card__actions {
        flex-direction: column;

        .designbase-button {
            width: 100%;
        }
    }
}

/* ===== Focus (A11y) ===== */
.designbase-card.designbase-card--clickable:focus-visible {
    outline: 2px solid var(--db-border-focus);
    outline-offset: 2px;
}