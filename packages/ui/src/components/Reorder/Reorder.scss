.designbase-reorder {
    display: flex;
    flex-direction: column;
    gap: var(--db-gap-xs);
    user-select: none;

    // 변형별 스타일
    &--default {
        .designbase-reorder__item {
            background-color: var(--db-surface-base);
            border: 1px solid var(--db-border-base);
            border-radius: var(--db-radius-m);
        }
    }

    &--bordered {
        .designbase-reorder__item {
            background-color: var(--db-surface-base);
            border: 2px solid var(--db-border-base);
            border-radius: var(--db-radius-l);
        }
    }

    &--filled {
        .designbase-reorder__item {
            background-color: var(--db-surface-layer-1);
            border: 1px solid var(--db-border-base);
            border-radius: var(--db-radius-m);
        }
    }

    &--minimal {
        .designbase-reorder__item {
            background-color: transparent;
            border: none;
            border-radius: 0;
            border-bottom: 1px solid var(--db-border-base);

            &:last-child {
                border-bottom: none;
            }
        }
    }

    // 크기별 스타일
    &--s {
        .designbase-reorder__item {
            padding: var(--db-padding-s);
            min-height: 40px;
        }

        .designbase-reorder__drag-handle {
            width: var(--db-size-md);
            height: var(--db-size-md);
        }

        .designbase-reorder__checkbox {
            width: var(--db-size-md);
            height: var(--db-size-md);
        }
    }

    &--m {
        .designbase-reorder__item {
            padding: var(--db-padding-m);
            min-height: 56px;
        }

        .designbase-reorder__drag-handle {
            width: var(--db-size-lg);
            height: var(--db-size-lg);
        }

        .designbase-reorder__checkbox {
            width: var(--db-size-lg);
            height: var(--db-size-lg);
        }
    }

    &--l {
        .designbase-reorder__item {
            padding: var(--db-padding-l);
            min-height: 72px;
        }

        .designbase-reorder__drag-handle {
            width: var(--db-size-xl);
            height: var(--db-size-xl);
        }

        .designbase-reorder__checkbox {
            width: var(--db-size-xl);
            height: var(--db-size-xl);
        }
    }

    // 방향별 스타일
    &--horizontal {
        flex-direction: row;
        gap: var(--db-gap-s);

        .designbase-reorder__item {
            flex: 1;
            min-width: 120px;
        }
    }

    // 전체 너비
    &--full-width {
        width: 100%;
    }

    // 비활성화
    &--disabled {
        opacity: var(--db-opacity-60);
        pointer-events: none;

        .designbase-reorder__item {
            cursor: not-allowed;
        }
    }

    // 드래그 중
    &--dragging {
        .designbase-reorder__item {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        // 드래그 중일 때 아이템들이 자연스럽게 이동
        .designbase-reorder__item:not(.designbase-reorder__item--dragged) {
            transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease;
        }

        // 드롭 가이드 라인
        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }
    }

    // 선택 가능
    &--selectable {
        .designbase-reorder__item {
            cursor: pointer;
        }
    }

    // 아이템 스타일
    &__item {
        display: flex;
        align-items: center;
        gap: var(--db-gap-s);
        transition: all var(--db-animation-speed) var(--db-animation-ease);
        cursor: grab;
        position: relative;

        &:hover {
            background-color: var(--db-surface-layer-1);
            transform: translateY(-1px);
            box-shadow: var(--db-shadow-sm);
        }

        &:active {
            cursor: grabbing;
            transform: translateY(0);
        }

        &:focus-visible {
            outline: 2px solid var(--db-color-info);
            outline-offset: 2px;
        }

        // 선택된 상태
        &--selected {
            background-color: var(--db-blue-100);
            border-color: var(--db-color-info);

            &:hover {
                background-color: var(--db-blue-200);
            }
        }

        // 드래그 중인 상태 - 떠있는 스타일 (로테이션 제거)
        &--dragged {
            opacity: 0.8;
            transform: scale(1.02);
            z-index: 1000;
            cursor: grabbing;
            box-shadow:
                0 12px 24px rgba(0, 0, 0, 0.15),
                0 6px 12px rgba(0, 0, 0, 0.1),
                0 0 0 2px var(--db-brand-primary);
            position: relative;
            background-color: var(--db-surface-base);
            border: 2px solid var(--db-brand-primary);
            transition: none; // 드래그 중에는 애니메이션 비활성화

            &:hover {
                transform: scale(1.02);
            }

            // 드래그 중일 때 원래 위치에 플레이스홀더 표시
            &::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: var(--db-surface-layer-1);
                border: 2px dashed var(--db-brand-primary);
                border-radius: inherit;
                opacity: 0.6;
                pointer-events: none;
                animation: placeholderPulse 1.5s ease-in-out infinite;
            }
        }

        // 드래그 종료 후 기본 상태로 복원
        &:not(&--dragged):not(&--drag-over) {
            opacity: 1;
            transform: scale(1);
            z-index: auto;
            cursor: grab;
            box-shadow: var(--db-shadow-sm);
            border: 1px solid var(--db-border-base);
            background-color: var(--db-surface-base);
            transition: all 0.2s ease;
        }

        // 드래그 오버 상태 - 드래그 방향에 따른 정확한 디바이더 위치
        &--drag-over {
            position: relative;
        }

        // 수직 방향 디바이더 - 아래로 드래그할 때 (가로선)
        &--drag-down::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 0;
            right: 0;
            height: 8px;
            background: var(--db-brand-primary);
            border-radius: 4px;
            opacity: 1;
            animation: dropGuidePulse 1s ease-in-out infinite;
            z-index: 1000;
            box-shadow: 0 0 12px rgba(6, 131, 255, 0.6);
        }

        // 수직 방향 디바이더 - 위로 드래그할 때 (가로선)
        &--drag-up::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            right: 0;
            height: 8px;
            background: var(--db-brand-primary);
            border-radius: 4px;
            opacity: 1;
            animation: dropGuidePulse 1s ease-in-out infinite;
            z-index: 1000;
            box-shadow: 0 0 12px rgba(6, 131, 255, 0.6);
        }

        // 수평 방향 디바이더 - 오른쪽으로 드래그할 때 (세로선)
        &--drag-right::before {
            content: '';
            position: absolute;
            left: -3px;
            top: 0;
            bottom: 0;
            width: 8px;
            background: var(--db-brand-primary);
            border-radius: 4px;
            opacity: 1;
            animation: dropGuidePulse 1s ease-in-out infinite;
            z-index: 1000;
            box-shadow: 0 0 12px rgba(6, 131, 255, 0.6);
        }

        // 수평 방향 디바이더 - 왼쪽으로 드래그할 때 (세로선)
        &--drag-left::after {
            content: '';
            position: absolute;
            right: -3px;
            top: 0;
            bottom: 0;
            width: 8px;
            background: var(--db-brand-primary);
            border-radius: 4px;
            opacity: 1;
            animation: dropGuidePulse 1s ease-in-out infinite;
            z-index: 1000;
            box-shadow: 0 0 12px rgba(6, 131, 255, 0.6);
        }

        // 비활성화 상태
        &--disabled {
            opacity: var(--db-opacity-50);
            cursor: not-allowed;

            &:hover {
                background-color: inherit;
                transform: none;
                box-shadow: none;
            }
        }
    }

    // 드래그 핸들
    &__drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--db-text-secondary);
        cursor: grab;
        flex-shrink: 0;
        transition: color var(--db-animation-speed) var(--db-animation-ease);

        &:hover {
            color: var(--db-color-info);
        }

        &:active {
            cursor: grabbing;
        }

        svg {
            width: 100%;
            height: 100%;
        }
    }

    // 체크박스
    &__checkbox {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    &__checkbox-input {
        width: 16px;
        height: 16px;
        cursor: pointer;
        accent-color: var(--db-color-info);
    }

    // 콘텐츠
    &__content {
        flex: 1;
        min-width: 0;
        color: var(--db-text-primary);
        line-height: 1.5;
    }


}



// 반응형 디자인
@media (max-width: 768px) {
    .designbase-reorder {
        &--horizontal {
            flex-direction: column;
            gap: var(--db-gap-xs);

            .designbase-reorder__item {
                min-width: auto;
            }
        }

        &__item {
            padding: var(--db-padding-s);
            min-height: 48px;
        }

        &__drag-handle {
            width: 18px;
            height: 18px;
        }

        &__checkbox {
            width: 18px;
            height: 18px;
        }
    }
}

// 다크 테마 지원은 @theme 패키지의 CSS 변수를 통해 자동으로 처리됩니다

// 접근성 개선
.designbase-reorder {
    &__item:focus-visible {
        outline: 2px solid var(--db-color-info);
        outline-offset: 2px;
    }

    &__drag-handle:focus-visible {
        outline: 2px solid var(--db-color-info);
        outline-offset: 2px;
        border-radius: var(--db-radius-s);
    }

    &__checkbox-input:focus-visible {
        outline: 2px solid var(--db-color-info);
        outline-offset: 2px;
    }
}

// 애니메이션
.designbase-reorder__item {
    animation: reorderItemSlideIn 0.3s ease;
}

@keyframes reorderItemSlideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

// 플레이스홀더 펄스 애니메이션
@keyframes placeholderPulse {

    0%,
    100% {
        opacity: 0.6;
        transform: scale(1);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.02);
    }
}

// 드롭 가이드 펄스 애니메이션
@keyframes dropGuidePulse {

    0%,
    100% {
        opacity: 0.6;
        transform: scale(1);
    }

    50% {
        opacity: 1;
        transform: scale(1.1);
    }
}

// 드래그 시작 애니메이션 (로테이션 제거)
@keyframes dragStart {
    from {
        transform: scale(1);
        box-shadow: var(--db-shadow-sm);
    }

    to {
        transform: scale(1.02);
        box-shadow:
            0 12px 24px rgba(0, 0, 0, 0.15),
            0 6px 12px rgba(0, 0, 0, 0.1);
    }
}

// 드롭 완료 애니메이션 (로테이션 제거)
@keyframes dropComplete {
    0% {
        transform: scale(1.02);
    }

    50% {
        transform: scale(1.05);
    }

    100% {
        transform: scale(1);
    }
}

// 드래그 중 스크롤 방지
.designbase-reorder--dragging {
    body {
        overflow: hidden;
    }
}

// 터치 디바이스 최적화
@media (hover: none) and (pointer: coarse) {
    .designbase-reorder {
        &__item {
            min-height: 60px; // 터치하기 쉽게 높이 증가
            touch-action: none; // 터치 스크롤 방지

            // 터치 시 더 큰 피드백
            &:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
        }

        &__drag-handle {
            min-width: 44px; // 터치 타겟 최소 크기
            min-height: 44px;
            touch-action: none;
        }

        &__checkbox {
            min-width: 44px;
            min-height: 44px;
        }

        // 터치에서 드래그 중인 아이템 스타일 조정 (로테이션 제거)
        &__item--dragged {
            transform: scale(1.05); // 터치에서는 더 큰 스케일만
            box-shadow:
                0 15px 30px rgba(0, 0, 0, 0.2),
                0 8px 16px rgba(0, 0, 0, 0.15),
                0 0 0 2px var(--db-brand-primary);
        }
    }
}